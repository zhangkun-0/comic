<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>多格漫画排版编辑器</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
    <script type="module" src="src/main.js" defer></script>
  </head>
  <body>
    <div id="app">
      <aside class="sidebar" id="settings-panel">
        <h1>页面设置</h1>
        <div class="panel-group">
          <label>
            页面尺寸 (px)
            <div class="inline-inputs">
              <input type="number" id="page-width" min="200" value="1000" />
              <span class="dim-multiply">×</span>
              <input type="number" id="page-height" min="200" value="1600" />
            </div>
          </label>
          <label>
            上下边距
            <input type="number" id="margin-vertical" min="0" value="60" />
          </label>
          <label>
            左右边距
            <input type="number" id="margin-horizontal" min="0" value="60" />
          </label>
          <label>
            格框粗细
            <input type="number" id="border-thickness" min="1" value="4" />
          </label>
          <label>
            漫画区域颜色
            <input type="color" id="manga-area-color" value="#5c9ded" />
          </label>
          <label>
            背景/间隙颜色
            <select id="gap-color">
              <option value="white" selected>白色</option>
              <option value="black">黑色</option>
            </select>
          </label>
        </div>

        <h2>格子切分</h2>
        <div class="panel-group">
          <label>
            纵切间隙
            <input type="number" id="split-gap-vertical" min="0" value="16" />
          </label>
          <label>
            横切间隙
            <input type="number" id="split-gap-horizontal" min="0" value="24" />
          </label>
          <button id="toggle-split" class="primary">开始切分格子</button>
          <p class="hint" id="split-hint">左键拖动以预览切分，松开鼠标完成操作。</p>
        </div>

        <h2>图片</h2>
        <div class="panel-group">
          <button id="upload-image" class="secondary" disabled>为选中格子上传图片</button>
          <p class="hint">在格内滚轮缩放，右键拖动平移图片。</p>
        </div>

        <h2>对话框</h2>
        <div class="panel-group">
          <div class="button-row">
            <button data-dialog-type="ellipse">椭圆</button>
            <button data-dialog-type="rectangle">直角矩形</button>
            <button data-dialog-type="pointer">尖角椭圆</button>
          </div>
          <label>
            字体大小
            <input type="number" id="dialog-font-size" min="8" value="18" />
          </label>
          <label>
            内边距
            <input type="number" id="dialog-padding" min="0" value="16" />
          </label>
          <label>
            对话框线条粗细
            <input type="number" id="dialog-stroke" min="1" value="5" />
          </label>
        </div>

        <h2>导出</h2>
        <div class="panel-group">
          <label>
            导出格式
            <select id="export-format">
              <option value="jpg">JPG</option>
              <option value="png">PNG</option>
            </select>
          </label>
          <label>
            图片质量
            <select id="export-quality">
              <option value="1">高</option>
              <option value="0.8">中</option>
              <option value="0.6">低</option>
            </select>
          </label>
          <button id="export-image" class="primary">导出图片</button>
        </div>
      </aside>

      <main id="workspace">
        <div id="workspace-toolbar">
          <span id="split-mode-indicator">当前模式：编辑</span>
          <span id="zoom-indicator">缩放：100%</span>
        </div>
        <div id="canvas-wrapper">
          <div id="canvas" class="gap-white">
            <div id="page" data-role="page">
              <div id="page-size-label">1000 × 1600</div>
              <div id="manga-area-container">
                <svg id="manga-area" xmlns="http://www.w3.org/2000/svg"></svg>
              </div>
            </div>
          </div>
        </div>
      </main>

      <aside class="sidebar" id="layers-panel">
        <h2>图层</h2>
        <ul id="layer-list"></ul>
      </aside>
    </div>

    <input type="file" id="hidden-file-input" accept="image/*" style="display: none" />
  </body>
</html>
